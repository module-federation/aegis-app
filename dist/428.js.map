{"version":3,"sources":["webpack://aegis-app/./src/domain/util/utils.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","toPrimitive","undefined","res","call","TypeError","Number","compose","_len","funcs","Array","_key","initVal","reduceRight","val","func","composeAsync","_len2","_key2","then","Promise","resolve","asyncPipe","_len3","_key3","reduce","o","f","passwd","process","env","ENCRYPTION_PWD","algo","crypto","iv","Buffer","alloc","encrypt","text","cipher","encrypted","update","decrypt","cipherText","console","log","decipher","decrypted","hash","data","digest","uuid","nanoid","makeArray","v","isArray","makeObject","prop","p","c","async","promise","result","ok","asObject","asArray","error"],"mappings":"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","file":"428.js","sourcesContent":["'use strict'\n\nimport crypto from 'crypto'\nimport { nanoid } from 'nanoid'\n\nexport function compose (...funcs) {\n  return function (initVal) {\n    return funcs.reduceRight((val, func) => func(val), initVal)\n  }\n}\n\nexport function composeAsync (...funcs) {\n  return function (initVal) {\n    return funcs.reduceRight(\n      (val, func) => val.then(func),\n      Promise.resolve(initVal)\n    )\n  }\n}\n\n/**\n * @callback pipeFn\n * @param {object} obj - the object to compose\n * @returns {object} - the composed object\n */\n\n/**\n * @param {pipeFn} func\n */\nexport const asyncPipe = (...func) => obj =>\n  func.reduce((o, f) => o.then(f), Promise.resolve(obj))\n\nconst passwd = process.env.ENCRYPTION_PWD\nconst algo = 'aes-192-cbc'\nconst key = crypto.scryptSync(String(passwd), 'salt', 24)\nconst iv = Buffer.alloc(16, 0)\n\nexport function encrypt (text) {\n  const cipher = crypto.createCipheriv(algo, key, iv)\n  let encrypted = cipher.update(text, 'utf8', 'hex')\n  encrypted += cipher.final('hex')\n  return encrypted\n}\n\nexport function decrypt (cipherText) {\n  console.log('decrypt(%s)', cipherText)\n  const decipher = crypto.createDecipheriv(algo, key, iv)\n  let decrypted = decipher.update(cipherText, 'hex', 'utf8')\n  decrypted += decipher.final('utf8')\n  return decrypted\n}\n\nexport function hash (data) {\n  return crypto\n    .createHash('sha1')\n    .update(data)\n    .digest('hex')\n}\n\nexport function uuid () {\n  // return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, c =>\n  //   (c ^ (crypto.randomBytes(16)[0] & (15 >> (c / 4)))).toString(16)\n  // );\n  return nanoid()\n}\n\nexport function makeArray (v) {\n  return Array.isArray(v) ? v : [v]\n}\n\nexport function makeObject (prop) {\n  if (Array.isArray(prop)) {\n    return prop.reduce((p, c) => ({ ...p, ...c }))\n  }\n  return prop\n}\n\n/**\n *\n * @param {Promise<{\n * ok:()=>any,\n *\n * }} promise\n * @returns\n */\nexport function async (promise) {\n  return promise\n    .then(result => ({\n      ok: true,\n      object: result,\n      asObject: () => makeObject(result),\n      asArray: () => makeArray(result)\n    }))\n    .catch(error => {\n      console.error(error)\n      return Promise.resolve({ ok: false, error })\n    })\n}\n"],"sourceRoot":""}